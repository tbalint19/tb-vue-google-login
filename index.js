!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("vue")):"function"==typeof define&&define.amd?define("tb-vue-google-login",["vue"],n):"object"==typeof exports?exports["tb-vue-google-login"]=n(require("vue")):e["tb-vue-google-login"]=n(e.vue)}(window,function(e){return function(e){var n={};function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)o.d(t,i,function(n){return e[n]}.bind(null,i));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=1)}([function(n,o){n.exports=e},function(e,n,o){"use strict";o.r(n);o(0);var t=function(){var e=this.$createElement;this._self._c;return this._m(0)};t._withStripped=!0;var i=function(e,n,o,t,i,r,s,u){var l,c="function"==typeof e?e.options:e;if(n&&(c.render=n,c.staticRenderFns=o,c._compiled=!0),t&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),s?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=l):i&&(l=u?function(){i.call(this,this.$root.$options.shadowRoot)}:i),l)if(c.functional){c._injectStyles=l;var g=c.render;c.render=function(e,n){return l.call(n),g(e,n)}}else{var a=c.beforeCreate;c.beforeCreate=a?[].concat(a,l):[l]}return{exports:e,options:c}}({name:"GoogleLoginComponent",methods:{emitGoogleLoginSuccess:function(e){this.$emit("googleLoginSuccess",e)},emitLoginSuccess:function(e){this.$emit("loginSuccess",e),this.disconnectGoogle()},emitGoogleLoginFailure:function(e){this.$emit("googleLoginFailure",e)},emitLoginFailure:function(e){this.$emit("loginFailure",e)},emitGoogleLogoutFailure:function(e){this.$emit("googleLogoutFailure",e)},emitGooglLogoutSuccess:function(e){this.$emit("googleLogoutSuccess",e)},setup:function(){window.emitGoogleLoginSuccess=this.emitGoogleLoginSuccess.bind(this),window.emitLoginSuccess=this.emitLoginSuccess.bind(this),window.emitGoogleLoginFailure=this.emitGoogleLoginFailure.bind(this),window.emitLoginFailure=this.emitLoginFailure.bind(this),window.emitGoogleLogoutFailure=this.emitGoogleLogoutFailure.bind(this),window.emitGooglLogoutSuccess=this.emitGooglLogoutSuccess.bind(this)},disconnectGoogle:function(){delete window.emitGoogleLoginSuccess,delete window.emitLoginSuccess,delete window.emitGoogleLoginFailure,delete window.emitLoginFailure,delete window.emitGoogleLogoutFailure,delete window.emitGooglLogoutSuccess}},created:function(){this.setup()}},t,[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"google-login-component"}},[n("div",{staticClass:"g-signin2",attrs:{id:"my-signin2","data-onsuccess":"onSignIn","data-theme":"dark"}}),this._v(" "),n("script",{attrs:{type:"application/javascript"}},[this._v("\n    function renderButton() {\n      gapi.signin2.render('my-signin2', {\n        'scope': 'profile email',\n        'width': 173,\n        'height': 25,\n        'longtitle': true,\n        'theme': 'dark',\n        'onsuccess': onSuccess,\n        'onfailure': onFailure\n      });\n    }\n    function onSuccess(googleUser) {\n      var profile = googleUser.getBasicProfile();\n      window.emitGoogleLoginSuccess(profile);\n      var id_token = googleUser.getAuthResponse().id_token;\n      sendToken(id_token)\n    }\n    function onFailure(err) {\n      window.emitGoogleLoginFailure(err)\n    }\n    function sendToken(token) {\n      var xhr = new XMLHttpRequest();\n      xhr.open('POST', window.googleAuthUrl);\n      xhr.setRequestHeader('Content-Type', 'application/json');\n      xhr.onload = function() {\n        if (xhr.status === 200) {\n          window.emitLoginSuccess(xhr.response)\n        } else {\n          window.emitLoginFailure(xhr.response)\n        }\n        googleSignOut()\n      };\n      xhr.send(JSON.stringify({ token }));\n    }\n    function googleSignOut() {\n      gapi.auth2.getAuthInstance().signOut()\n        .then((res) => window.emitGooglLogoutSuccess(res))\n        .catch(err => window.emitGooglLogoutSuccess(err))\n    }\n  ")]),this._v(" "),n("script",{attrs:{type:"application/javascript",src:"https://apis.google.com/js/platform.js?onload=renderButton",async:"",defer:""}})])}],!1,null,"77dff49e",null);i.options.__file="src/google-login-component.vue";var r=i.exports;function s(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}o.d(n,"default",function(){return u});var u=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,o,t;return n=e,t=[{key:"install",value:function(e,n){window.googleAuthUrl=n.authUrl,e.component("google-login-component",r)}}],(o=null)&&s(n.prototype,o),t&&s(n,t),e}()}])});